(()=>{var e,t={734:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(496),n=s(366),o=s(687),i=s(323);t.default=function(e){const t=r.languages.registerCompletionItemProvider("typestack",{async provideCompletionItems(e,t,s,a){const h=["import","fn","loop","for","while","if","else","break","continue","int","bool","str","float","any","@int","@float","@str","@bool","@any","true","false"].map((e=>new r.CompletionItem(e,r.CompletionItemKind.Keyword))),c=new n.Scanner(e.getText(),console.log);c.scan();const p=new o.Parser(c.tokens,i.standardLibraryFunctions);await p.parse();const l=p.functions,u=[];return Object.keys(l).forEach((e=>Object.keys(l[e]).forEach((e=>{u.push(e)})))),[...h,...[...new Set(u)].map((e=>new r.CompletionItem(e,r.CompletionItemKind.Function)))]}});e.subscriptions.push(t)}},786:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=s(496);t.default=function(e){e.subscriptions.push(r.commands.registerCommand("typestack.run",(async()=>{try{if(r.window.terminals[0].show(),!await(r.window.activeTextEditor?.document?.save()))throw new Error;(r.window.activeTerminal||r.window.createTerminal()).sendText("typestack "+r.window.activeTextEditor?.document?.fileName)}catch(e){r.window.showErrorMessage("Unable to run code.")}})))}},256:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToDocumentChanges=t.refreshDiagnostics=void 0;const r=s(496),n=s(366),o=s(687),i=s(784),a=s(323),h=s(682);async function c(e,t){const s=[],r=e.getText(),c=await async function(e){const t=new n.Scanner(e,console.log),s=t.scan(),r=new o.Parser(t.tokens,a.standardLibraryFunctions);return[...s,...await r.parse(),...(0,i.default)(r.program,a.standardLibraryFunctions,r.newFunctions)]}(r);c&&(c instanceof h.TSError?s.push(p(0,c)):c.forEach((e=>{s.push(p(0,e))}))),t.set(e.uri,s)}function p(e,t){let s=t.pos.endPos.char-t.pos.startPos.char;0===s&&(s=1);const n=new r.Range(t.pos.startPos.line-1,t.pos.startPos.char-1,t.pos.endPos.line-1,t.pos.startPos.char-1+s),o=new r.Diagnostic(n,t.message,r.DiagnosticSeverity.Error);return o.code="typestack",o}t.refreshDiagnostics=c,t.subscribeToDocumentChanges=function(e,t){r.window.activeTextEditor&&c(r.window.activeTextEditor.document,t),e.subscriptions.push(r.window.onDidChangeActiveTextEditor((e=>{e&&c(e.document,t)}))),e.subscriptions.push(r.workspace.onDidChangeTextDocument((e=>c(e.document,t)))),e.subscriptions.push(r.workspace.onDidCloseTextDocument((e=>t.delete(e.uri))))}},602:(e,t,s)=>{var r={"./Date.js":[203,203],"./Math.js":[698,698],"./Store.js":[969,969],"./Str.js":[538,538]};function n(e){if(!s.o(r,e))return Promise.resolve().then((()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],n=t[0];return s.e(t[1]).then((()=>s(n)))}n.keys=()=>Object.keys(r),n.id=602,e.exports=n},496:e=>{"use strict";e.exports=require("vscode")},323:(e,t,s)=>{"use strict";s.r(t),s.d(t,{functionToText:()=>n,standardLibraryFunctions:()=>o});const r=require("readline");function n(e,t,s){return`${e}(${Object.keys(s.params).map((e=>`${e}: ${s.params[e]}`)).join(" ")}) @${t}`}const o={int:{"<":{params:{right:"int",left:"int"},rawCode:(e,t)=>{e.bool.push(t.left<t.right)}},">":{params:{right:"int",left:"int"},rawCode:(e,t)=>{e.bool.push(t.left>t.right)}},"<=":{params:{right:"int",left:"int"},rawCode:(e,t)=>{e.bool.push(t.left<=t.right)}},">=":{params:{right:"int",left:"int"},rawCode:(e,t)=>{e.bool.push(t.left>=t.right)}},"+":{params:{right:"int",left:"int"},rawCode:(e,t)=>{e.int.push(t.left+t.right)}},"-":{params:{right:"int",left:"int"},rawCode:(e,t)=>{e.int.push(t.left-t.right)}},"*":{params:{right:"int",left:"int"},rawCode:(e,t)=>{e.int.push(t.left*t.right)}},"/":{params:{right:"int",left:"int"},rawCode:(e,t)=>{if(0===t.right)return new Error("divide by zero. `/(right: int, left: int)` must have `right` parameter not equal to `0`");e.float.push(t.left/t.right)}},"//":{params:{right:"int",left:"int"},rawCode:(e,t)=>{if(0===t.right)return new Error("divide by zero. `//(right: int, left: int)` must have `right` parameter not equal to `0`");e.int.push(Math.floor(t.left/t.right))}},"%":{params:{right:"int",left:"int"},rawCode:(e,t)=>{if(0===t.right)return new Error("divide by zero. `%(right: int, left: int)` must have `right` parameter not equal to `0`");e.int.push(t.left%t.right)}},"^":{params:{right:"int",left:"int"},rawCode:(e,t)=>{e.int.push(t.left^t.right)}},rand:{params:{max:"int",min:"int"},rawCode:(e,t)=>{e.int.push(Math.floor(Math.random()*(t.max-t.min+1))+t.min)}},wait:{params:{milliseconds:"int"},rawCode:async(e,t)=>{await new Promise((e=>{setTimeout((()=>{e("resolved")}),t.milliseconds)}))}}},float:{"<":{params:{right:"float",left:"float"},rawCode:(e,t)=>{e.bool.push(t.left<t.right)}},">":{params:{right:"float",left:"float"},rawCode:(e,t)=>{e.bool.push(t.left>t.right)}},"<=":{params:{right:"float",left:"float"},rawCode:(e,t)=>{e.bool.push(t.left<=t.right)}},">=":{params:{right:"float",left:"float"},rawCode:(e,t)=>{e.bool.push(t.left>=t.right)}},"+":{params:{right:"float",left:"float"},rawCode:(e,t)=>{e.float.push(t.left+t.right)}},"-":{params:{right:"float",left:"float"},rawCode:(e,t)=>{e.float.push(t.left-t.right)}},"*":{params:{right:"float",left:"float"},rawCode:(e,t)=>{e.float.push(t.left*t.right)}},"/":{params:{right:"float",left:"float"},rawCode:(e,t)=>{if(0===t.right)return new Error("divide by zero. `/(right: float, left: float)` must have `right` parameter not equal to `0.0`");e.float.push(t.left/t.right)}},"//":{params:{right:"float",left:"float"},rawCode:(e,t)=>{if(0===t.right)return new Error("divide by zero. `//(right: float, left: float)` must have `right` parameter not equal to `0.0`");e.float.push(Math.floor(t.left*t.right))}},"%":{params:{right:"float",left:"float"},rawCode:(e,t)=>{if(0===t.right)return new Error("divide by zero. `%(right: float, left: float)` must have `right` parameter not equal to `0.0`");e.int.push(t.left%t.right)}},"^":{params:{right:"float",left:"float"},rawCode:(e,t)=>{e.float.push(t.left^t.right)}}},str:{length:{params:{string:"str"},rawCode:(e,t)=>{e.int.push(t.str.length)}},"+":{params:{right:"str",left:"str"},rawCode:(e,t)=>{e.str.push(t.left+t.right)}}},bool:{"&":{params:{right:"bool",left:"bool"},rawCode:(e,t)=>{e.bool.push(t.left&&t.right)}},"|":{params:{right:"bool",left:"bool"},rawCode:(e,t)=>{e.bool.push(t.left||t.right)}},"!":{params:{boolean:"bool"},rawCode:(e,t)=>{e.bool.push(!t.boolean)}}},any:{dup:{params:{first:"any"},rawCode:(e,t,s)=>{e[s].push(t.first),e[s].push(t.first)}},drop:{params:{first:"any"}},swap:{params:{first:"any",second:"any"},rawCode:(e,t,s)=>{e[s].push(t.first),e[s].push(t.second)}},over:{params:{first:"any",second:"any"},rawCode:(e,t,s)=>{e[s].push(t.second),e[s].push(t.first),e[s].push(t.second)}},rot:{params:{first:"any",second:"any",third:"any"},rawCode:(e,t,s)=>{e[s].push(t.second),e[s].push(t.first),e[s].push(t.third)}},print:{params:{item:"any"},rawCode:(e,t,s,r)=>{"float"!==s||t.item.toString().includes(".")||(t.item=t.item.toFixed(1)),r(t.item.toString()),e[s].push(t.item)}},read:{params:{prompt:"str"},rawCode:async(e,t,s)=>{if("undefined"!=typeof window)return;const n=r.createInterface({input:process.stdin,output:process.stdout}),o=await new Promise((e=>{n.question(t.prompt,e)}));if(n.close(),"str"===s)e[s].push(o);else if("bool"===s)if("true"===o.trim())e[s].push(!0);else{if("false"!==o.trim())return new Error(`invalid input for type \`${s}\`: \`${o}\``);e[s].push(!1)}else{const t="float"===s;let r=!1;for(const e of o.trim().split(""))if("."!==e){if(!(e>="0"&&e<="9"))return new Error(`invalid input for type \`${s}\`: \`${o}\``)}else{if(r||!t)return new Error(`invalid input for type \`${s}\`: \`${o}\``);r=!0}t?e[s].push(parseFloat(o)):e[s].push(parseInt(o))}}},"==":{params:{right:"any",left:"any"},rawCode:(e,t)=>{e.bool.push(t.left===t.right)}},"!=":{params:{right:"any",left:"any"},rawCode:(e,t)=>{e.bool.push(t.left!==t.right)}},toStr:{params:{item:"any"},rawCode:(e,t,s)=>{"float"!==s||t.item.toString().includes(".")||(t.item=t.item.toFixed(1)),e.str.push(t.item.toString())}},toBool:{params:{item:"any"},rawCode:(e,t)=>{e.bool.push(!!t.item)}},toInt:{params:{item:"any"},rawCode:(e,t,s)=>{let r;if("int"===s)r=t.item;else if("float"===s)r=Math.trunc(t.item);else if("bool"===s)r=t.item?1:0;else{for(const e of t.item.split(""))if(!(e>="0"&&e<="9"))return new Error(`unable to convert \`str\` to \`int\`: \`${t.item}\``);r=parseInt(t.item)}e.int.push(r)}},toFloat:{params:{item:"any"},rawCode:(e,t,s)=>{let r;if("float"===s||"int"===s)r=t.item;else if("bool"===s)r=t.item?1:0;else{let e=!1;for(const s of t.item.split(""))if("."!==s){if(!(s>="0"&&s<="9"))return new Error(`unable to convert \`str\` to \`float\`: \`${t.item}\``)}else{if(e)return new Error(`unable to convert \`str\` to \`float\`: \`${t.item}\``);e=!0}r=parseFloat(t.item)}e.float.push(r)}}}}},687:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Parser:()=>i});var r=s(28),n=s(682),o=s(934);class i{tokens;pointer;functions;newFunctions;program;errors;constructor(e,t){this.tokens=e,this.functions=t,this.newFunctions=[],this.pointer=0,this.program=[],this.errors=[]}async parse(){await this.#e();const e=this.#t(!0);return this.program=e,this.errors}async#e(){for(this.#s();this.pointer<0||!this.#r();){if(!this.#n("keyword","import"))return void this.#o();if(this.#o(),this.#n("identifier")){this.#o();try{const e=(await s(602)(`./${this.#i().value}.js`)).default;for(const t of r.Y2)for(const s in e[t])this.functions[t][this.#i().value+"."+s]=e[t][s]}catch(e){this.errors.push(new n.TSError({startPos:this.#i().startPos,endPos:this.#i().endPos},"unable to import module"))}}else this.#o(),this.errors.push(new n.TSError({startPos:this.#i().startPos,endPos:this.#i().endPos},"expected an identifier after an `import` keyword")),this.#s()}}#t(e,t=!1,s=!1){e||"openBracket"!==this.#i().type||this.#o();const r=[];for(;!this.#r();){const i=this.#i(),a=["openBracket","closeParen","openParen","colon"];if((0,o.Z)(a,i.type)){this.errors.push(new n.TSError({startPos:i.startPos,endPos:i.endPos},"unexpected character")),this.#o();continue}const h=["int","float","str","bool","identifier"];if((0,o.Z)(h,i.type))r.push(i),this.#o();else{if("closeBracket"===i.type){if(e){this.errors.push(new n.TSError({startPos:i.startPos,endPos:i.endPos},"unexpected character")),this.#o();continue}return this.#o(),r}if("keyword"!==i.type)this.errors.push(new n.TSError({startPos:i.startPos,endPos:i.endPos},"unknown token `{}`",i.value)),this.#o();else{const a=["int","str","float","bool"];if((0,o.Z)(a,i.value)){r.push(i),this.#o();continue}const h=["@int","@bool","@str","@float","@any"];if((0,o.Z)(h,i.value)){this.errors.push(new n.TSError({startPos:i.startPos,endPos:i.endPos},"unexpected keyword `{}`. Keyword `{}` must only be found after parameters in a function declaration",i.value,i.value)),this.#o();continue}if("else"===i.value){this.errors.push(new n.TSError({startPos:i.startPos,endPos:i.endPos},"unexpected keyword `else`. Keyword `else` must only be found after if statements")),this.#o();continue}if("any"===i.value){s?r.push(i):this.errors.push(new n.TSError({startPos:i.startPos,endPos:i.endPos},"unexpected keyword `any`. Keyword `any` must only be found in `@any` functions")),this.#o();continue}if("break"===i.value){t?r.push(i):this.errors.push(new n.TSError({startPos:i.startPos,endPos:i.endPos},"unexpected keyword `break`. Keyword `break` must only be found in loops")),this.#o();continue}if("continue"===i.value){t?r.push(i):this.errors.push(new n.TSError({startPos:i.startPos,endPos:i.endPos},"unexpected keyword `continue`. Keyword `continue` must only be found in loops")),this.#o();continue}if("import"===i.value){this.errors.push(new n.TSError({startPos:i.startPos,endPos:i.endPos},"unexpected keyword `import`. Keyword `import` must only be found at the top of programs")),this.#o();continue}if("loop"===i.value){const e=i.startPos,t=i.endPos;this.#n("openBracket")?this.#o():(this.#o(),this.errors.push(new n.TSError({startPos:this.#i().startPos,endPos:this.#i().endPos},"expected an opening bracket `{` after a `loop` keyword")));const o=this.#t(!1,!0,s);r.push({startPos:e,endPos:t,type:"loop",block:o});continue}if("for"===i.value){const e=i.startPos;this.#n("keyword","loop")?this.#o():(this.#o(),this.errors.push(new n.TSError({startPos:this.#i().startPos,endPos:this.#i().endPos},"expected a `loop` keyword after a `for` keyword")),this.#s());const t=this.#i().endPos;this.#n("openBracket")?this.#o():(this.#o(),this.errors.push(new n.TSError({startPos:this.#i().startPos,endPos:this.#i().endPos},"expected an opening bracket `{` after a `loop` keyword")));const o=this.#t(!1,!0,s);r.push({startPos:e,endPos:t,type:"forLoop",block:o});continue}if("while"===i.value){const e=i.startPos;this.#n("keyword","loop")?this.#o():(this.#o(),this.errors.push(new n.TSError({startPos:this.#i().startPos,endPos:this.#i().endPos},"expected a `loop` keyword after a `while` keyword")),this.#s());const t=this.#i().endPos;this.#n("openBracket")?this.#o():(this.#o(),this.errors.push(new n.TSError({startPos:this.#i().startPos,endPos:this.#i().endPos},"expected an opening bracket `{` after a `loop` keyword")));const o=this.#t(!1,!0,s);r.push({startPos:e,endPos:t,type:"whileLoop",block:o});continue}if("if"===i.value){const e=i.startPos,o=i.endPos;this.#n("openBracket")?this.#o():(this.#o(),this.errors.push(new n.TSError({startPos:this.#i().startPos,endPos:this.#i().endPos},"expected an opening bracket `{` after an `if` keyword")));const a=this.#t(!1,t,s);if(this.pointer-=1,this.#n("keyword","else")){this.#o(),this.#n("openBracket")?this.#o():(this.#o(),this.errors.push(new n.TSError({startPos:this.#i().startPos,endPos:this.#i().endPos},"expected an opening bracket `{` after an `else` keyword")));const i=this.#t(!1,t,s);r.push({startPos:e,endPos:o,type:"if",block:a,else:i});continue}this.#o(),r.push({startPos:e,endPos:o,type:"if",block:a});continue}if("fn"===i.value){e||this.errors.push(new n.TSError({startPos:i.startPos,endPos:i.endPos},"unexpected `fn` keyword. Function declarations must not be nestled in other statements"));let s=!1;this.#n("identifier")?this.#o():(s=!0,this.#o(),this.errors.push(new n.TSError({startPos:this.#i().startPos,endPos:this.#i().endPos},"expected an identifier after a `fn` keyword")),this.#s());const r=this.#i().value;this.#n("openParen")?this.#o():(this.#o(),this.errors.push(new n.TSError({startPos:this.#i().startPos,endPos:this.#i().endPos},"expected an opening parenthesis `(` after a function identifier")),this.#s());const a={};for(;!this.#r()&&!this.#n("EOF")&&!this.#n("closeParen")&&"closeParen"!==this.#i().type;){if(!this.#n("identifier")){this.#o(),this.errors.push(new n.TSError({startPos:this.#i().startPos,endPos:this.#i().endPos},"expected an identifier or closing bracket `)` within a function's opening bracket `(`"));continue}this.#o();const e=this.#i().value;if(e in a&&this.errors.push(new n.TSError({startPos:this.#i().startPos,endPos:this.#i().endPos},"duplicate parameter name. Function parameters must have unique names")),this.#n("colon")){this.#o(),this.#o();const t=["int","str","float","bool","any"];"keyword"===this.#i().type&&(0,o.Z)(t,this.#i().value)?a[e]=this.#i().value:(this.errors.push(new n.TSError({startPos:this.#i().startPos,endPos:this.#i().endPos},"expected a type `int`, `float`, `str`, `bool` or `any` after a colon for a function parameter")),this.#s())}else a[e]="any"}let h;this.#o(),this.#r()?this.errors.push(new n.TSError({startPos:this.#i().startPos,endPos:this.#i().endPos},"expected a closing parenthesis `)`")):this.#o();const c=["@int","@bool","@str","@float","@any"];!this.#r()&&"keyword"===this.#i().type&&(0,o.Z)(c,this.#i().value)?h={"@int":"int","@float":"float","@str":"str","@bool":"bool","@any":"any"}[this.#i().value]:(s=!0,this.errors.push(new n.TSError({startPos:this.#i().startPos,endPos:this.#i().endPos},"expected a `@int`, `@float`, `@str`, `@bool` or `@any` after function parameters")),this.#s()),this.#n("openBracket")?this.#o():(this.#o(),this.errors.push(new n.TSError({startPos:this.#i().startPos,endPos:this.#i().endPos},"expected an opening bracket `{` after a `function` declaration")));const p=this.#t(!1,t,!0);s||(this.newFunctions.push({name:r,type:h}),this.functions[h][r]={params:a,body:p});continue}this.errors.push(new n.TSError({startPos:i.startPos,endPos:i.endPos},"unknown keyword `{}`",i.value)),this.#o()}}}return this.#r()&&!e&&this.errors.push(new n.TSError({startPos:this.#i().startPos,endPos:this.#i().endPos},"expected an ending bracket `}`")),r}#r(){return"EOF"===this.tokens[this.pointer].type}#i(){return this.#r()?this.tokens[this.tokens.length-1]:this.tokens[this.pointer]}#o(){this.pointer+=1}#s(){this.pointer-=1}#n(e,t){if(this.#o(),this.#r())return this.#s(),"EOF"===e;const s=this.#i().type===e&&(!t||t&&t===this.#i().value);return this.#s(),s}}},366:(e,t,s)=>{"use strict";s.r(t),s.d(t,{Scanner:()=>o});var r=s(682);const n=["import","fn","loop","for","while","if","else","break","continue","int","bool","str","float","any","@int","@float","@str","@bool","@any"];class o{input;tokens;pointer;char;line;errors;constructor(e,t){e=e.trimEnd(),r.ErrorInputConfig.input=e,r.ErrorInputConfig.consoleFunc=t,this.input=e,this.tokens=[],this.pointer=0,this.char=1,this.line=1,this.errors=[]}scan(){for(;!this.#r();){const e=this.#i();if(["(",")","{","}",":"].includes(e)){switch(e){case"(":this.#a("openParen","(");break;case")":this.#a("closeParen",")");break;case"{":this.#a("openBracket","{");break;case"}":this.#a("closeBracket","}");break;case":":this.#a("colon",":")}this.#o()}else if("#"!==e)if([" ","\t","\r"].includes(e))this.#o();else if("\n"!==e)if('"'!==e)e>="0"&&e<="9"?this.#h():this.#c();else{const e={line:this.line,char:this.char};this.#o();let t="";for(;!this.#r()&&'"'!==this.#i();)"\\"===this.#i()?(this.#o(),"\\"===this.#i()?t+="\\":"n"===this.#i()?t+="\n":"r"===this.#i()?t+="\r":"t"===this.#i()?t+="\t":'"'===this.#i()?t+='"':this.errors.push(new r.TSError({startPos:{line:this.line,char:this.char-1},endPos:{line:this.line,char:this.char+1}},"unknown escape code")),this.#o()):(t+=this.#i(),"\n"===this.#i()?this.#p():this.#o());this.#r()&&this.errors.push(new r.TSError({startPos:e,endPos:{line:this.line,char:this.char}},'expected an ending string literal `"`')),this.#o(),this.#a("str",t,e),this.#l()}else this.#p();else for(;!this.#r()&&"\n"!==this.#i();)this.#o()}return this.#o(),this.#a("EOF",""),this.errors}#a(e,t,s={line:this.line,char:this.char},r={line:this.line,char:this.char}){this.tokens.push({type:e,value:t,startPos:s,endPos:r})}#r(){return this.pointer>=this.input.length}#i(){return this.input[this.pointer]}#o(){this.pointer+=1,this.char+=1}#p(){this.pointer+=1,this.line+=1,this.char=1}#l(){this.#r()||["\n","\r","\t"," ","{","}","(",")",":","#"].includes(this.#i())||this.errors.push(new r.TSError({startPos:{line:this.line,char:this.char},endPos:{line:this.line,char:this.char+1}},"Expected separator (`\\n`, `\\r`, `\\t`, ` `, `{`, `}`, `(`, `)`, `:`)"))}#h(){const e={line:this.line,char:this.char};let t="";for(;!this.#r()&&this.#i()>="0"&&this.#i()<="9";)t+=this.#i(),this.#o();if(this.#r()||"."!==this.#i()){const s=parseInt(t);Number.isNaN(s)&&this.errors.push(new r.TSError({startPos:{line:e.line,char:e.char},endPos:{line:this.line,char:this.char}},"Unable to parse int")),this.#a("int",s,e)}else{for(t+=".",this.#o();!this.#r()&&this.#i()>="0"&&this.#i()<="9";)t+=this.#i(),this.#o();const s=parseFloat(t);Number.isNaN(s)&&this.errors.push(new r.TSError({startPos:{line:e.line,char:e.char},endPos:{line:this.line,char:this.char}},"Unable to parse float")),this.#a("float",s,e)}this.#l()}#c(){const e={line:this.line,char:this.char};let t="";for(;!this.#r()&&![" ","\n","\t","\r",":","{","}","(",")","#"].includes(this.#i());)t+=this.#i(),this.#o();"false"===t?this.#a("bool",!1,e):"true"===t?this.#a("bool",!0,e):n.some((e=>e===t))?this.#a("keyword",t,e):this.#a("identifier",t,e)}}},28:(e,t,s)=>{"use strict";s.d(t,{Y2:()=>r});const r=["int","float","str","bool","any"];class n{stack;constructor(){this.stack=[]}push(e){this.stack.push(e)}get(){return this.stack.pop()}check(){return 0!==this.stack.length}peek(){return this.stack[this.stack.length-1]}}new n,new n,new n,new n},784:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(28),n=s(682),o=s(934);function i(e,t,s){const r=a(e,{},"int",t);let n=[];for(const e of s){const s={...t[e.type][e.name].params};if("any"!==e.type)for(const t in s)"any"===s[t]&&(s[t]=e.type);const r=a(t[e.type][e.name].body,s,e.type,t);r.length>0&&(n=[...n,...r])}return[...r,...n]}function a(e,t,s,i){let h=[];for(const c of e)if("value"in c)if("identifier"===c.type){const e=c.value;e in t?s=t[e]:e in i[s]||e in i.any||e in i.int&&e in i.float&&e in i.str&&e in i.bool||h.push(new n.TSError({startPos:c.startPos,endPos:c.endPos},"Attempt to call function not found at stack `{}`",s))}else"keyword"===c.type?(0,o.Z)(r.Y2,c.value)&&(s=c.value):(0,o.Z)(r.Y2,c.type)&&(s=c.type);else if("loop"===c.type){const e=a(c.block,t,s,i);e.length>0&&(h=[...h,...e])}else if("forLoop"===c.type){const e=a(c.block,t,"int",i);e.length>0&&(h=[...h,...e]),s="int"}else if("whileLoop"===c.type){const e=a(c.block,t,"bool",i);e.length>0&&(h=[...h,...e]),s="bool"}else if("if"===c.type){const e=a(c.block,t,"bool",i);if(c.else){const s=a(c.else,t,"bool",i);h=[...h,...e,...s]}else h=[...h,...e];s="bool"}return h}},682:(e,t,s)=>{"use strict";var r;function n(e,...t){return`${t.join("")}${e}${r.Reset}`}s.r(t),s.d(t,{ErrorInputConfig:()=>o,TSError:()=>i,isTSError:()=>a}),function(e){e.Reset="[0m",e.Bright="[1m",e.Dim="[2m",e.Underscore="[4m",e.Blink="[5m",e.Reverse="[7m",e.Hidden="[8m",e.FgBlack="[30m",e.FgRed="[31m",e.FgGreen="[32m",e.FgYellow="[33m",e.FgBlue="[34m",e.FgMagenta="[35m",e.FgCyan="[36m",e.FgWhite="[37m",e.BgBlack="[40m",e.BgRed="[41m",e.BgGreen="[42m",e.BgYellow="[43m",e.BgBlue="[44m",e.BgMagenta="[45m",e.BgCyan="[46m",e.BgWhite="[47m"}(r||(r={}));const o={input:"",consoleFunc:console.log};class i{error;message;pos;constructor(e,t,...s){this.pos=e;let i=-1;const a=t.replace(/{}/g,(()=>(i+=1,s[i].toString())));this.message=a;let c=o.input.split("\n")[e.startPos.line-1],p=e.startPos.char-1;if(!(c.length<71)){let t=c[e.startPos.char-1];const s=c.substring(0,e.startPos.char-1),o=c.substring(e.startPos.char);s.length>=35&&(p=39,t=n("... ",r.Bright,r.FgBlue)+s.slice(-35)+t),o.length>=35&&(t=t+o.slice(0,35)+n(" ...",r.Bright,r.FgBlue)),c=t}let l=e.endPos.char-e.startPos.char;0===l&&(l=1),e.startPos.line!==e.endPos.line&&(l=36),l>36&&(l=36);const u=n("^".repeat(l),r.FgRed,r.Bright),d=n("error",r.FgRed,r.Bright),f=n("--\x3e",r.FgBlue,r.Bright),m=n("|",r.FgBlue,r.Bright),w=n(e.startPos.line,r.FgBlue,r.Bright),k=e.startPos.line.toString().length,P=`\n${d}: ${n(a,r.Bright)}\n${h(k+1)}${f} ${e.startPos.line}:${e.startPos.char}\n${h(k+1)}${m}\n${w} ${m} ${c}\n${h(k+1)}${m} ${h(p)}${u}`;this.error=P}fire(){o.consoleFunc(this.error)}}function a(e){return e instanceof i}function h(e){return" ".repeat(e)}},934:(e,t,s)=>{"use strict";function r(e,t){return e.some((e=>e===t))}s.d(t,{Z:()=>r})}},s={};function r(e){var n=s[e];if(void 0!==n)return n.exports;var o=s[e]={exports:{}};return t[e](o,o.exports,r),o.exports}r.m=t,r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,s)=>(r.f[s](e,t),t)),[])),r.u=e=>e+".extension.js",r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},e={179:1},r.f.require=(t,s)=>{e[t]||(t=>{var s=t.modules,n=t.ids,o=t.runtime;for(var i in s)r.o(s,i)&&(r.m[i]=s[i]);o&&o(r);for(var a=0;a<n.length;a++)e[n[a]]=1})(require("./"+r.u(t)))};var n={};(()=>{"use strict";var e=n;Object.defineProperty(e,"__esModule",{value:!0}),e.activate=void 0;const t=r(496),s=r(256),o=r(734),i=r(786);e.activate=function(e){const r=t.languages.createDiagnosticCollection("parseAndTypeErrors");e.subscriptions.push(r),(0,s.subscribeToDocumentChanges)(e,r),(0,o.default)(e),(0,i.default)(e)}})(),module.exports=n})();